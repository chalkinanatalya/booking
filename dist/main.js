(()=>{"use strict";const t=(t,e)=>{if(t>=0&&t>=e&&e>=0)return Math.floor(Math.random()*(t-e+1))+e;throw new Error("Incorrect input")},e=(t,e,o)=>{if(t>=0&&t>=e&&e>=0)return parseFloat((Math.random()*(t-e)+e).toFixed(o));throw new Error("Incorrect input")},o=e=>e[t(e.length-1,0)],r=e=>{const o=[];for(let r=0;r<e.length;r++){const r=e[t(e.length-1,0)];o.includes(r)||o.push(r)}return o},a=["palace","flat","house","bungalow"],n=["12:00","13:00","14:00"],c=["wifi","dishwasher","parking","washer","elevator","conditioner"],p=["http://o0.github.io/assets/images/tokyo/hotel1.jpg","http://o0.github.io/assets/images/tokyo/hotel2.jpg","http://o0.github.io/assets/images/tokyo/hotel3.jpg"],s=["Уютная квартира у озера","Маленький домик в лесу","Дворцовых размеров квартира","Бунгало у моря"],u=["Отличная техника, все удобства и красивый вид из окна","Много кафе поблизости","Бесплатный пляж","Недавно сделан ремонт"],i=()=>new Array(10).fill(null).map((()=>({author:{avatar:`img/avatars/user${t(10,1)}.png`},offer:{title:o(s),address:`${e(60,50,6)}, ${e(20,10,6)}`,price:Math.floor(1e5*Math.random()),type:o(a),rooms:Math.floor(10*Math.random()),guests:Math.floor(10*Math.random()),checkin:n[t(2,0)],checkout:n[t(2,0)],features:r(c),description:o(u),photos:r(p),location:{x:e(35.7,35.65,5),y:e(139.8,139.7,5)}}}))),l=document.querySelector("#card"),h=document.querySelector("#map-canvas"),d=l.content.querySelector(".popup"),m=i();i(),(()=>{const t=document.createDocumentFragment();m.forEach((e=>{d instanceof HTMLElement&&t.appendChild((({author:t,offer:e})=>{const o=d.cloneNode(!0);o.querySelector(".popup__avatar").textContent=t.avatar,o.querySelector(".popup__title").textContent=e.title,o.querySelector(".popup__text--address").textContent=e.address,o.querySelector(".popup__text--price").textContent=`${e.price} ₽/ночь`,o.querySelector(".popup__description").textContent=e.description;const r=e.type,a=o.querySelector(".popup__type");switch(r){case"palace":a.textContent="Дворец",e.price;break;case"flat":a.textContent="Квартира",e.price;break;case"house":a.textContent="Дом";break;case"bungalow":a.textContent="Бунгало"}const n=e.rooms,c=e.guests;let p="комнат",s="гост";switch(n%10){case 1:p+="а";break;case 2:case 3:case 4:p+="ы"}s+=c%10==1?"я":"ей",o.querySelector(".popup__text--capacity").textContent=`${e.rooms} ${p} для ${e.guests} ${s}`,e.checkin=e.checkout,o.querySelector(".popup__text--time").textContent=`Заезд после ${e.checkin}, выезд до ${e.checkout}`;const u=o.querySelector(".popup__features");e.features.forEach((t=>{let e=document.createElement("li");e.innerText=t,u.appendChild(e)}));const i=o.querySelector(".popup__photos"),l=e.photos.values();for(const t of l)i.innerHTML+=`<img src="${t}" class="popup__photo" width="45" height="40" alt="Фотография жилья">`;return o})(e))})),h.appendChild(t)})()})();